<?php
// DO NOT EDIT: File is generated by code generator.
namespace Pokepay;

class RegisterBankAccount extends TestCase
{
    public function testRegisterBankAccount()
    {
        $client = $this->newClient();
        $customerName = "customer-name" . $this->randomString(6);
        $accountName = "account-name" . $this->randomString(6);
        $customer = $client->send(new Request\CreateCustomerAccount(
            "4b138a4c-8944-4f98-a5c4-96d3c1c415eb",
            [
                "user_name" => $customerName,
                "account_name" => $accountName,
            ]
        ));
        $userDeviceMetadata = "{\"user_agent\": \"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:120.0) Gecko/20100101 Firefox/120.0\"}";
        $userDevice = $client->send(new Request\CreateUserDevice(
            $customer->user->id,
            [
                "metadata" => $userDeviceMetadata,
            ]
        ));
        $getUserDeviceResponse = $client->send(new Request\GetUserDevice(
            $userDevice->id,
        ));
        $this->assertEquals($getUserDeviceResponse->isActive, FALSE);
        $userDeviceActivated = $client->send(new Request\ActivateUserDevice(
            $getUserDeviceResponse->id,
        ));
        $this->assertEquals($userDeviceActivated->isActive, TRUE);
        $createBank = $client->send(new Request\CreateBank(
            $getUserDeviceResponse->id,
            "4b138a4c-8944-4f98-a5c4-96d3c1c415eb",
            "dummy",
            "ポケペイタロウ",
        ));
        $bankAccountsListed = $client->send(new Request\ListBanks(
            $getUserDeviceResponse->id,
        ));
        $this->assertEquals($bankAccountsListed->count, 0);
    }
}
